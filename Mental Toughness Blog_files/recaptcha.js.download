function onloadInfusionRecaptchaCallback(){function e(e,i,s,t,n){var a=e,d=i,l=s,u=t,o=grecaptcha;jQuery.ajax({url:"/app/form/usernameExists/"+e,success:function(e){var i;if(i=e,a&&i&&(l=!0,r(d,a+" is already in use. Please choose another."),d.classList.add("infusion-field-required")),!l)try{u.submit()}catch(s){console.error("Failed to find surrounding form.",s)}},error:function(e,i,r){alert("Failed to find surrounding form in validate Repeated Username , Please try again"),console.log("Failed to find surrounding form in validate Repeated Username")}}),o.reset(n)}function i(i,s){jQuery(".infusion-field-required-errorMessage").remove();for(var t=!1,n=i.querySelectorAll("input[is-required='true']"),a=0;a<n.length;a++)n[a].value&&0!==n[a].value.length?n[a].classList.contains("infusion-field-required")&&(n[a].classList.remove("infusion-field-required"),n[a].hasChildNodes()&&n[a].parentNode.removeChild(n[a].nextSibling)):(n[a].classList.contains("infusion-field-required")||(n[a].classList.add("infusion-field-required"),r(n[a])),t=!0);for(var d=i.querySelectorAll(".infusion-radio[is-required='true']"),l=0;l<d.length;l++){for(var u=!1,o=d[l].querySelectorAll("input[type='radio']"),c=0;c<o.length;c++)o[c].checked&&(u=!0);u||(r(d[l]),t=!0)}for(var f=i.querySelectorAll("input[type='checkbox']"),h=0;h<f.length;h++){var v=!1;f[h].hasAttribute("is-required")&&f[h].checked&&(v=!0),v||(r(f[h]),t=!0)}for(var q=i.querySelectorAll("select[is-required='true']"),m=0;m<q.length;m++){var y=!1;""!==q[m].value&&"â€”"!==q[m].value?y=!0:q[m].classList.contains("infusion-field-required")||q[m].classList.add("infusion-field-required"),y?q[m].classList.contains("infusion-field-required")&&q[m].classList.remove("infusion-field-required"):(r(q[m]),t=!0)}for(var g=i.querySelectorAll("textarea[is-required='true']"),L=0;L<g.length;L++)g[L].value&&0!==g[L].value.length?g[L].classList.contains("infusion-field-required")&&(g[L].classList.remove("infusion-field-required"),g[L].hasChildNodes()&&g[L].parentNode.removeChild(g[L].nextSibling)):(g[L].classList.contains("infusion-field-required")||(g[L].classList.add("infusion-field-required"),r(g[L])),t=!0);for(var p=document.querySelectorAll("input[type='email']"),A=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,S=0;S<p.length;S++){var j=p[S].value;j&&!A.test(j)&&(t=!0,r(p[S],"Invalid email address entered"))}for(var x=document.querySelectorAll(".infusion-date-input[is-required='true']"),Q=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,b=0;b<x.length;b++){var M=x[b].value;M&&!Q.test(M)&&(t=!0,r(x[b],"Invalid date format entered"))}for(var E=document.querySelectorAll("input[type='tel']"),C=/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\.\/0-9]*$/g,k=0;k<E.length;k++){var U=E[k].value;U&&!C.test(U)&&(t=!0,r(E[k],"Invalid phone number entered"))}var R=document.querySelector("#inf_other_Password"),_=document.querySelector("#inf_other_RetypePassword");if(R&&_){var N=R.value,w=_.value,z=N.localeCompare(w);0!==z&&(t=!0,r(R,"The passwords you typed did not match."),r(_,"The passwords you typed did not match."),R.classList.add("infusion-field-required"),_.classList.add("infusion-field-required"))}var F=document.querySelector("#inf_other_Username");if(F){var T=F.value,I=/[-!$%^&*()_+|~=`{}\[\]:\/;<>?,.@#]/;T&&!T.charAt(0).match(/[a-zA-Z]/)?(t=!0,r(F,"Username must start with a letter"),F.classList.add("infusion-field-required")):T&&I.test(T)?(t=!0,r(F,"Username must only contain letters & numbers."),F.classList.add("infusion-field-required")):T.length>30&&(t=!0,r(F,"Username must not exceed 30 characters."),F.classList.add("infusion-field-required"))}return e(T,F,t,i,s),t}function r(e,i){var r=document.createElement("div");r.classList.add("infusion-field-required-errorMessage"),i?r.innerHTML=i:r.innerHTML="This field is required";var s=jQuery(e).closest("td"),t=s.find(".infusion-field-required-errorMessage");!t.length>0&&jQuery(e).closest("td").append(r)}var s=document.querySelectorAll(".infusion-recaptcha");[].forEach.call(s,function(e){var r=grecaptcha.render(e.id,{sitekey:"6Le4bx0UAAAAANeDRNRCRSCL2O-zB5Lf5yUUmxXQ",callback:function(){for(var s=e.parentElement;"FORM"!==s.tagName;)s=s.parentElement;try{i(s,r)}catch(t){console.error("Failed to find surrounding form.",t)}}})});for(var t=jQuery("label:contains('*')"),n=0;n<t.length;n++){var a=t[n].textContent.replace("*","<span class='span-required-field'>*</span>");jQuery(t[n]).html(t[n].textContent=a)}for(var d=document.querySelectorAll("input[is-required='true']"),l=0;l<d.length;l++){var u=d[l];u.addEventListener("keyup",function(){this.value||0!==this.value.length?this.classList.contains("infusion-field-required")&&(this.classList.remove("infusion-field-required"),jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()):this.classList.contains("infusion-field-required")||(this.classList.add("infusion-field-required"),r(this))})}for(var o=document.querySelectorAll("textarea[is-required='true']"),l=0;l<o.length;l++){var u=o[l];u.addEventListener("keyup",function(){this.value?this.classList.contains("infusion-field-required")&&(this.classList.remove("infusion-field-required"),jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()):this.classList.contains("infusion-field-required")||(this.classList.add("infusion-field-required"),r(this))})}for(var c=document.querySelectorAll("input[type='radio']"),l=0;l<c.length;l++){var u=c[l];u.addEventListener("change",function(){jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()})}for(var f=document.querySelectorAll("input[type='checkbox']"),l=0;l<f.length;l++){var u=f[l];u.addEventListener("change",function(){jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()})}for(var h=document.querySelectorAll("select[is-required='true']"),l=0;l<h.length;l++){var u=h[l];u.addEventListener("change",function(){this.classList.contains("infusion-field-required")&&this.classList.remove("infusion-field-required"),jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()})}for(var v=document.querySelectorAll(".infusion-date-input[is-required='true']"),l=0;l<v.length;l++){var u=v[l];u.addEventListener("change",function(){this.value?(this.classList.contains("infusion-field-required")&&this.classList.remove("infusion-field-required"),jQuery(this).closest("td").find(".infusion-field-required-errorMessage").remove()):this.classList.contains("infusion-field-required")||(this.classList.add("infusion-field-required"),r(this))})}}